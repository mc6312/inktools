# Ink Tools

## ВВЕДЕНИЕ

1. Сие ПО является свободным, распространяемым под лицензией [GPL v3](https://www.gnu.org/licenses/gpl.html).
2. ПО создано и дорабатывается автором исключительно ради собственных
   нужд и развлечения, а также в соответствии с его представлениями об эргономике
   и функциональности.
3. Автор всех видал в гробу и ничего никому не должен, кроме явно
   прописанного в GPL.
4. Несмотря на вышеуказанное, автор совершенно не против, если ПО
   подойдёт кому-то еще, кроме тех, под кем прогорит сиденье из-за пунктов
   с 1 по 3.

## НАЗНАЧЕНИЕ

Набор костылей и велосипедов для учёта коллекции чернил.

В качестве эрзац-БД используются файлы формата Emacs Org Mode с
некоторой дополнительной (не нарушающей стандарт) разметкой.

## Требования ##

- Linux (или другую ОС, в которой заработает нижеперечисленное, напр.
  MS Windows с установленным MSYS2)
- Python 3.6 или новее
- для inktools (см. ниже) дополнительно требуется GTK 3.20 или новее и соотв. модули gi.repository

### inktools ###

Обработка файла .org, содержащего БД коллекции чернил, и вывод статистики.
Файл должен быть указан в командной строке, иначе программа ищет файл
inks.org в своём каталоге. Файл также может быть выбран из графического
интерфейса.

### inkavail.py ###

Обработка файла .org, содержащего БД коллекции чернил, и вывод статистики.
Файл должен быть указан в командной строке, иначе программа ищет файл
inks.org в своём каталоге.

### inkrandom.py ###

Случайный выбор чернил из имеющихся в наличии.
Использование:
inkrandom.py [filename.org [[!]tag[ ... [!]tag]]
Файл указывается в командной строке (аналогично inkavail.py), в дополнение
к этому могут быть указаны метки для фильтрации чернил.
Метки, начинающиеся с символа "!", запрещают выбор чернил с такими метками.

### Формат файлов ###

БД коллекции чернил представляет собой файл Emacs OrgMode с некоторыми
"расширениями", не ломающими совместимость, т.к. для штатного парсера
Emacs OrgMode они являются простым текстом.

Ветви дерева, содержащие описания чернил, должны иметь метку "ink".

Статус ветвей:

  * не указан: чернила НЕ планируются к покупке (т.к. забракованы по
    какой-либо причине, в т.ч. по результатам испытаний);
  * TODO: чернила планируются к покупке и/или испытанию;
  * DONE: чернила были куплены и испытаны.

Наличие чернил в коллекции описано отдельно (см. ниже описание данных
в текстовых полях) и статусом TODO/DONE/... не указывается.

#### Данные, помещаемые в комментарии ####

Строки вида "# @KEYWORD параметры".

После символа комментария обязателен пробел, чтобы стандартный парсер
не спотыкался.

@TAGSTAT Общий заголовок:заголовок 1го столбца:метка [... метка]

Шаблон для вывода таблицы статистики, требует трёх параметров, разделяющихся
символом ":".

  1. "общий заголовок" - название таблицы,
  2. заголовок 1го столбца,
  3. метки, разделённые пробелами

Пример: # @TAGSTAT По цветам:Цвет:black blue blue_black gray green

@TAGNAMES метка=название:[...:меткаN=названиеN:]

Соответствие меток Emacs OrgMode (которые не могут содержать пробелов
и некоторых других символов) и человекочитаемых строк, для отображения
в таблицах статистики.

Пример: # @TAGNAMES dark=тёмные:black=чёрные:blue=синие:blue_black=сине-чёрные:

#### Данные в текстовых полях ####

Дополнительно обрабатываются текстовые поля ветвей, имеющих название
"в наличии" - в тексте ищутся строки вида "флакон NN мл" и/или
"картридж".
